<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gmail PWA Launcher</title>

    <!-- PWA -->
    <link rel="manifest" href="public/manifest.json">
    <meta name="theme-color" content="#ffffff" />
    <link rel="icon" href="public/favicon.ico">

    <!-- iOS (optional but nice) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
            color: #111;
            background: #fff;
        }

        .wrap {
            display: grid;
            place-items: center;
            height: 100%;
            gap: 16px;
            text-align: center;
            padding: 24px;
        }

        .btn {
            display: inline-block;
            padding: 12px 16px;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            text-decoration: none;
            font-weight: 600;
            transition: transform .05s ease;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .muted {
            color: #6b7280;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <img src="public/icons/monochrome.svg" alt="App Icon" width="72" height="72" />
        <h1>Gmail を起動します…</h1>
        <p class="muted">数秒後に自動で Gmail に移動します。上手くいかない場合は下のボタンを押してください。</p>
        <a id="openGmail" class="btn" href="https://mail.google.com/mail/u/0/#inbox" rel="noopener">Gmail を開く</a>
        <p class="muted" id="installHint"></p>
    </div>

    <script src="main.js" type="module"></script>
    <script>
        // 自動リダイレクト（初回のみ 600ms 後）
        setTimeout(() => {
            const url = new URL(window.location.href);
            const action = url.searchParams.get("action");
            let target = "https://mail.google.com/mail/u/0/#inbox";
            if (action === "compose") {
                target = "https://mail.google.com/mail/?view=cm&fs=1&tf=1";
            }
            location.replace(target);
        }, 600);
    </script>
</body>

</html>