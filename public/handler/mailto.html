<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Handling mailto…</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-ancestors 'none'; script-src 'self'">
    <style>
        body {
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
            margin: 24px;
        }

        .muted {
            color: #6b7280;
            font-size: 14px;
        }

        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 6px;
        }
    </style>
</head>

<body>
    <p>Gmail の作成画面へ転送します…</p>
    <p class="muted">自動で移動しない場合は <a id="fallback" href="#">こちら</a> をクリックしてください。</p>
    <script>
        (function () {
            const params = new URLSearchParams(location.search);
            // 仕様: ?url=（ブラウザまたは OS から渡されるエンコード済み mailto）
            const original = params.get("url") || "";
            // Gmail の公式 mailto ハンドラ形式へ橋渡し
            const gmail = "https://mail.google.com/mail/?extsrc=mailto&url=" + encodeURIComponent(original);
            const a = document.getElementById("fallback");
            a.href = gmail;

            // 即時遷移
            location.replace(gmail);
        })();
    </script>
</body>

</html>